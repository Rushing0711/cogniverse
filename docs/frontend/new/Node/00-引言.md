[NodeJS英文官网](https://nodejs.org/en)

[NodeJS中文官网](https://nodejs.cn/)

[Npm官网](https://www.npmjs.com/)

[视频教程](https://www.bilibili.com/video/BV1gM411W7ex/?spm_id_from=333.337.search-card.all.click&vd_source=b850b3a29a70c8eb888ce7dff776a5d1)



# 1 模块系统

JavaScript 主要有两种模块语法，了解它们非常重要：

## 1.1 CommonJS (CJS)

- **主要用于：** **Node.js** 环境（后端）。

- **语法：**

  - **默认导出：**

  ```js
  // 导出单个值
  module.exports = function() {
    console.log('默认导出');
  };
  
  // 或者导出对象
  module.exports = {
    name: 'CommonJS',
    version: '1.0'
  };
  ```

  - **命名导出：**

  ```js
  // 导出多个值
  exports.add = function(a, b) {
    return a + b;
  };
  
  exports.subtract = function(a, b) {
    return a - b;
  };
  
  // 或者一次性导出
  module.exports = {
    add: function(a, b) { return a + b; },
    subtract: function(a, b) { return a - b; }
  };
  ```

  - **导入**

  ```js
  // 导入默认导出
  const myModule = require('./myModule');
  
  // 导入命名导出
  const { add, subtract } = require('./math');
  
  // 或者
  const math = require('./math');
  const result = math.add(2, 3);
  ```

## 1.2 ES Modules (ESM)

- **主要用于：** 浏览器环境（前端），现代 Node.js 也支持。
- **语法：**
  
  - **默认导出：**
  
  ```js
  // 导出单个值
  export default function() {
    console.log('默认导出');
  };
  
  // 或者导出对象
  export default {
    name: 'ESM',
    version: '1.0'
  };
  ```
  
  - **命名导出：**
  
  ```js
  // 导出多个值
  export const add = function(a, b) {
    return a + b;
  };
  
  export function subtract(a, b) {
    return a - b;
  };
  
  // 或者先定义后导出
  const multiply = (a, b) => a * b;
  const divide = (a, b) => a / b;
  
  export { multiply, divide };
  ```
  
  - **导入：**
  
  ```js
  // 导入默认导出
  import myModule from './myModule.js';
  
  // 导入命名导出
  import { add, subtract } from './math.js';
  
  // 同时导入默认和命名导出
  import myModule, { add, subtract } from './myModule.js';
  
  // 导入所有导出
  import * as math from './math.js';
  ```

## 1.3 对比总结

| 特性         | CommonJS                                                 | ES Modules                                   |
| :----------- | :------------------------------------------------------- | :------------------------------------------- |
| 加载方式     | 运行时加载，同步                                         | 编译时加载，异步                             |
| 默认导出语法 | module.exports = value                                   | export default value                         |
| 命名导出语法 | exports.name = value 或 module.exports = { name: value } | export const name = value 或 export { name } |
| 导入语法     | const module = require('module')                         | import module from 'module'                  |
| 动态导入     | 原生支持                                                 | 使用 import() 函数                           |
| 主要使用环境 | Node.js 服务器端                                         | 浏览器端和现代Node.js                        |
| 值的引用     | 导出值的拷贝                                             | 导出值的引用（动态绑定）                     |











