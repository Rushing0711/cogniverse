# ç¬¬1ç«  å¦‚ä½•å¼€å‘å¹¶å‘å¸ƒä¸€ä¸ªnpmåŒ…

## 1 å¼€å‘npmåŒ…

### 1.1 å‰ç½®æ¡ä»¶

- å®‰è£… [Node.js](https://nodejs.org/)ï¼ˆè‡ªå¸¦ npmï¼‰
- æ‹¥æœ‰ä¸€ä¸ª [npm å®˜ç½‘](https://www.npmjs.com/) è´¦å·
- åœ¨ç»ˆç«¯è¿è¡Œ `npm login` ç™»å½•ä½ çš„è´¦å·
- ä¸º `npm init` å‘½ä»¤è®¾ç½®é»˜è®¤çš„é…ç½®é€‰é¡¹

```bash
$ npm config set init-author-email "liming20110711@163.com"
$ npm config set init-author-name "wenqiu"
```

### 1.2 ç™»å½•npm

1. åœ¨å‘½ä»¤è¡Œä¸­ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
$ npm login
```

:::details ç™»å½•è¯¦æƒ…

```bash
npm notice Log in on https://registry.npmjs.org/
Login at:
https://www.npmjs.com/login?next=/login/cli/f3b87948-1a74-478b-86af-cf67b23b0124
Press ENTER to open in the browser...

Logged in on https://registry.npmjs.org/.
```

:::

2. å½“æç¤ºæ—¶ï¼Œè¾“å…¥æ‚¨çš„ç”¨æˆ·åã€å¯†ç å’Œç”µå­é‚®ä»¶åœ°å€ã€‚
3. å¦‚æœæ‚¨å·²å¯ç”¨åŒå› ç´ è®¤è¯ï¼Œå½“æç¤ºæ—¶ï¼Œè¾“å…¥ä¸€æ¬¡æ€§å¯†ç ã€‚
4. ä¸ºæµ‹è¯•æ‚¨æ˜¯å¦å·²æˆåŠŸç™»å½•ï¼Œè¯·è¾“å…¥ï¼š

```bash
$ npm whoami
```

5. æ‚¨çš„ npm ç”¨æˆ·ååº”è¯¥ä¼šæ˜¾ç¤ºã€‚

### 1.3 åˆ›å»ºé¡¹ç›®ç›®å½•

åœ¨ä¸ºä½ çš„åŒ…é€‰æ‹©åç§°æ—¶ï¼Œåº”é€‰æ‹©ä¸€ä¸ªåç§°ï¼š

- æ˜¯å”¯ä¸€çš„
- å…·æœ‰æè¿°æ€§
- ç¬¦åˆ npm æ”¿ç­–æŒ‡å—ã€‚ä¾‹å¦‚ï¼Œä¸è¦ç»™æ‚¨çš„åŒ…èµ·ä¾®è¾±æ€§çš„åç§°ï¼Œä¹Ÿä¸è¦ä½¿ç”¨ä»–äººçš„æ³¨å†Œå•†æ ‡åç§°æˆ–è¿å npm å•†æ ‡æ”¿ç­–ã€‚
- ä¸åŒ…å«å¤§å†™å­—æ¯

æ­¤å¤–ï¼Œåœ¨é€‰æ‹©æ— ä½œç”¨åŸŸåŒ…çš„åç§°æ—¶ï¼Œåº”é€‰æ‹©ä¸€ä¸ªåç§°ï¼š

- ä¸æ˜¯ä»¥ä¸å…¶ä»–åŒ…åç§°ç±»ä¼¼çš„æ–¹å¼æ‹¼å†™
- ä¸ä¼šä½¿ä»–äººå¯¹ä½œè€…èº«ä»½äº§ç”Ÿæ··æ·†

é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åœ°æ–¹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œè¿™å°†æˆä¸ºä½ çš„npmåŒ…çš„æ ¹ç›®å½•ã€‚ä¾‹å¦‚ï¼š

```bash
$ mkdir flyin-awesome-package
$ cd flyin-awesome-package
```

### 1.4 åˆå§‹åŒ–é¡¹ç›®ï¼ˆåˆ›å»ºä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼‰

[åˆå§‹åŒ–é¡¹ç›®](https://docs.npmjs.com/creating-a-package-json-file)

**åˆ›å»ºä»€ä¹ˆæ ·çš„æ¨¡å—ï¼Ÿ**

- å¯¹äºä½œç”¨åŸŸæ¨¡å—ï¼Œè¿è¡Œ `npm init --scope=@scope-name`
- å¯¹äºæ— ä½œç”¨åŸŸçš„æ¨¡å—ï¼Œè¿è¡Œ `npm init`

**å¿…éœ€å­—æ®µï¼ˆ `name` å’Œ `version` ï¼‰ä»¥åŠ `main` å­—æ®µï¼š**

- `name` : æ‚¨çš„æ¨¡å—åç§°ã€‚

- `version` : æ¨¡å—çš„åˆå§‹ç‰ˆæœ¬ã€‚æˆ‘ä»¬å»ºè®®éµå¾ªè¯­ä¹‰ç‰ˆæœ¬åŒ–è§„èŒƒï¼Œå¹¶ä» `1.0.0` å¼€å§‹ã€‚
- `main`: æ¨¡å—å…¥å£

åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ`npm init`æ¥åˆå§‹åŒ–é¡¹ç›®ã€‚è¿™ä¼šå¼•å¯¼ä½ å¡«å†™ä¸€äº›å…³äºé¡¹ç›®çš„å…ƒæ•°æ®ï¼Œå¦‚åç§°ã€ç‰ˆæœ¬ã€æè¿°ç­‰ã€‚ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨`npm init -y`å¿«é€Ÿç”Ÿæˆé»˜è®¤çš„`package.json`æ–‡ä»¶ã€‚

```bash
$ npm init
```

::: details npm init è¾“å‡º

```bash
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See `npm help init` for definitive documentation on these fields
and exactly what they do.

Use `npm install <pkg>` afterwards to install a package and
save it as a dependency in the package.json file.

Press ^C at any time to quit.
package name: (flyin-awesome-package) 
version: (1.0.0) 
description: é—®ç§‹ç¬¬ä¸€ä¸ªnpmæ’ä»¶åŒ…
entry point: (index.js) src/index.js
test command: 
git repository: 
keywords: flyin,å·¥å…·åŒ…,ä¾èµ–åº“,ä¸°å¯Œçš„å¥—ä»¶,é—®ç§‹,wenqiu
license: (ISC) 
About to write to /Users/wenqiu/WebstormProjects/frontend-node-learning/flyin-awesome-package/package.json:

{
  "name": "flyin-awesome-package",
  "version": "1.0.0",
  "main": "src/index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "flyin",
    "å·¥å…·åŒ…",
    "ä¾èµ–åº“",
    "ä¸°å¯Œçš„å¥—ä»¶",
    "é—®ç§‹",
    "wenqiu"
  ],
  "author": "wenqiu <liming20110711@163.com>",
  "license": "ISC",
  "description": "é—®ç§‹ç¬¬ä¸€ä¸ªnpmæ’ä»¶åŒ…"
}


Is this OK? (yes) yes
```

:::

:::tip

- æ‚¨å¯ä»¥å°†ä¸€ä¸ª `package.json` æ–‡ä»¶æ·»åŠ åˆ°æ‚¨çš„åŒ…ä¸­ï¼Œä»¥ä¾¿å…¶ä»–äººè½»æ¾ç®¡ç†å’Œå®‰è£…ã€‚å‘å¸ƒåˆ°æ³¨å†Œä¸­å¿ƒçš„åŒ…å¿…é¡»åŒ…å«ä¸€ä¸ª `package.json` æ–‡ä»¶ã€‚

- ä¸€ä¸ª `package.json` æ–‡ä»¶å¿…é¡»åŒ…å« `"name"` å’Œ `"version"` å­—æ®µã€‚

- `"name"` å­—æ®µåŒ…å«ä½ çš„åŒ…çš„åç§°ï¼Œå¿…é¡»å…¨éƒ¨å°å†™ä¸”ä¸åŒ…å«ä»»ä½•ç©ºæ ¼ã€‚å¯ä»¥åŒ…å«è¿å­—ç¬¦ã€ç‚¹å’Œä¸‹åˆ’çº¿ã€‚

- `"version"` å­—æ®µå¿…é¡»é‡‡ç”¨ `x.x.x` æ ¼å¼ï¼Œå¹¶éµå¾ª[è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶è§„èŒƒ](https://docs.npmjs.com/about-semantic-versioning)ã€‚

- å¦‚æœä½ éœ€è¦åŒ…å«åŒ…ä½œè€…ä¿¡æ¯ï¼Œåœ¨ `"author"` å­—æ®µä¸­ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼ˆç”µå­é‚®ä»¶å’Œç½‘ç«™éƒ½æ˜¯å¯é€‰çš„ï¼‰ï¼š

  `Your Name <email@example.com> (https://example.com)`

:::

### 1.5 ç¼–å†™ä»£ç ï¼ˆåˆ›å»ºNode.jsæ¨¡å—ï¼‰

åˆ›å»ºä¸€ä¸ªä¸ä½ åœ¨ `main` å­—æ®µä¸­æä¾›çš„åŒåæ–‡ä»¶ã€‚åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œå°†ä¸€ä¸ªå‡½æ•°ä½œä¸º `exports` å¯¹è±¡çš„å±æ€§æ·»åŠ ã€‚è¿™å°†ä½¿è¯¥å‡½æ•°å¯¹å…¶ä»–ä»£ç å¯ç”¨ï¼š

```js
// helloWorld.js
/**
 * è¿™æ˜¯é»˜è®¤å¯¼å‡ºï¼ˆDefault Exportï¼‰
 * ç›´æ¥å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–ä»»ä½•å…¶ä»–å€¼ï¼‰
 * åªèƒ½å¯¼å‡ºä¸€ä¸ªä¸»è¦çš„å€¼
 * å¯¼å…¥æ—¶ç›´æ¥è·å¾—è¯¥å‡½æ•°
 * @returns {string}
 */
module.exports = function helloWorld() {
    return 'Hello, World!';
};
```

```js
// src/welcome.js
/**
 * è¿™æ˜¯å‘½åå¯¼å‡ºï¼ˆNamed Exportsï¼‰
 * å¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å« printMsg å±æ€§
 * å¯ä»¥åŒæ—¶å¯¼å‡ºå¤šä¸ªå€¼/å‡½æ•°
 * å¯¼å…¥æ—¶éœ€è¦é€šè¿‡å±æ€§åè®¿é—®æˆ–ä½¿ç”¨è§£æ„èµ‹å€¼
 * @returns {string}
 */
exports.printMsg = function () {
    console.log("æ¬¢è¿ä½¿ç”¨æˆ‘çš„Node.jsæ¨¡å—");
}
```

```js
// src/index.js
const helloWorld = require('./helloWorld');
const welcome = require('./welcome');

module.exports = {
    helloWorld,
    welcome: welcome.printMsg
};
```

### 1.6 æœ¬åœ°æµ‹è¯•ä»£ç ï¼ˆåœ¨æœ¬åœ°æµ‹è¯•ä½ çš„æ¨¡å—ï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•æ–‡ä»¶ï¼Œæ¯”å¦‚`test.js`ï¼Œç¡®ä¿ä½ çš„ä»£ç èƒ½æ­£å¸¸å·¥ä½œã€‚

```js
// src/test.js
const {helloWorld, welcome} = require('./index');
console.log(helloWorld())
welcome();
```

ç„¶åè¿è¡Œæµ‹è¯•æ–‡ä»¶ï¼š

```bash
$ node src/test.js
```

```bash
Hello, World!
æ¬¢è¿ä½¿ç”¨æˆ‘çš„Node.jsæ¨¡å—
```

### 1.7 å‘å¸ƒåˆ°npm

å°†æ‚¨çš„åŒ…å‘å¸ƒåˆ° npmï¼š

- å¯¹äºç§æœ‰åŒ…å’Œæ— ä½œç”¨åŸŸåŒ…ï¼Œä½¿ç”¨ `npm publish` ã€‚
- å¯¹äºä½œç”¨åŸŸçš„å…¬å…±åŒ…ï¼Œä½¿ç”¨ `npm publish --access public`
- é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿è¡Œ `npm publish` å°†ä¸ºæ‚¨çš„åŒ…æ·»åŠ  `latest` åˆ†å‘æ ‡ç­¾ã€‚è‹¥è¦ä½¿ç”¨å…¶ä»–åˆ†å‘æ ‡ç­¾ï¼Œåœ¨å‘å¸ƒæ—¶ä½¿ç”¨ `--tag` æ ‡å¿—ã€‚
  - `npm publish --tag <tag>`

ç¡®ä¿`package.json`ä¸­åŒ…å«å¿…è¦çš„å­—æ®µï¼Œå¦‚`main`æŒ‡æ˜å…¥å£æ–‡ä»¶ï¼Œ`keywords`ä¾¿äºæœç´¢ï¼Œä»¥åŠ`repository`å’Œ`license`ç­‰ã€‚

```bash
$ npm publish
```

:::details

```bash
npm notice
npm notice ğŸ“¦  flyin-awesome-package@1.0.0
npm notice Tarball Contents
npm notice 366B package.json
npm notice 262B src/helloWorld.js
npm notice 151B src/index.js
npm notice 86B src/test.js
npm notice 318B src/welcome.js
npm notice Tarball Details
npm notice name: flyin-awesome-package
npm notice version: 1.0.0
npm notice filename: flyin-awesome-package-1.0.0.tgz
npm notice package size: 943 B
npm notice unpacked size: 1.2 kB
npm notice shasum: 4d7c92c7e9cc82dd0f382934a615e8feb33f9b35
npm notice integrity: sha512-48DOsbw8cqrqI[...]ulXC+R86+2eww==
npm notice total files: 5
npm notice
npm notice Publishing to https://registry.npmjs.org/ with tag latest and default access
+ flyin-awesome-package@1.0.0
```

:::

### 1.8 æ·»åŠ  `README.md` å¹¶æ›´æ–°å‘å¸ƒå¹¶å¼ƒç”¨æ—§ç‰ˆ

1. åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œåœ¨ä½ çš„åŒ…æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `README.md` çš„æ–‡ä»¶ã€‚
2. åœ¨ `README.md` æ–‡ä»¶ä¸­ï¼Œæ·»åŠ å…³äºä½ çš„åŒ…çš„æœ‰ç”¨ä¿¡æ¯ã€‚

åªæœ‰åœ¨ä½ å‘å¸ƒæ–°ç‰ˆæœ¬çš„åŒ…æ—¶ï¼Œ `README.md` æ–‡ä»¶æ‰ä¼šæ›´æ–°åˆ°åŒ…é¡µé¢ã€‚è¦æ›´æ–°ä½ çš„ `README.md` æ–‡ä»¶ï¼š

- æ›´æ–°è¡¥ä¸åŒ…ç‰ˆæœ¬

```bash
$ npm version patch
```

```bash
# è¾“å‡º
v1.0.1
```

- å‘å¸ƒ

```bash
$ npm publish
```

- å¼ƒç”¨æ—§ç‰ˆ

```bash
$ npm deprecate flyin-awesome-package@1.0.0 "fix:å…¥å£é¡µé¢æ”¾ç½®é”™è¯¯ä½ç½®ï¼Œå¯¼è‡´æ— æ³•ä½¿ç”¨"
$ npm deprecate flyin-awesome-package@1.0.1 "fix:å…¥å£æ–‡ä»¶è°ƒæ•´é”™è¯¯çš„bug"
```

- æ·»åŠ ç¨³å®šç‰ˆåˆ†å‘æ ‡ç­¾

```bash
$ npm dist-tag add flyin-awesome-package@1.0.2 stable
```

### 1.9 æœ€ç»ˆç›®å½•ç»“æ„

æœ€ç»ˆï¼Œä¸€ä¸ªæ’ä»¶åŒ…åº”è¯¥æœ‰å¦‚ä¸‹ç›®å½•ï¼š

```bash
$ tree --dirsfirst flyin-awesome-package
flyin-awesome-package
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ helloWorld.js
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ test.js
â”‚   â””â”€â”€ welcome.js
â”œâ”€â”€ package.json
â””â”€â”€ README.md

2 directories, 6 files
```



## 2 ä½¿ç”¨npmåŒ…

### 2.0 ç›®å½•ç»“æ„

```bash
$ tree --dirsfirst
.
â”œâ”€â”€ flyin-awesome-package
â”‚Â Â  â”œâ”€â”€ src
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helloWorld.js
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ test.js
â”‚Â Â  â”‚Â Â  â””â”€â”€ welcome.js
â”‚Â Â  â”œâ”€â”€ package.json
â”‚Â Â  â””â”€â”€ README.md
â””â”€â”€ flyin-awesome-package-test
    â”œâ”€â”€ src
    â”‚Â Â  â””â”€â”€ test.js
    â”œâ”€â”€ package-lock.json
    â””â”€â”€ package.json

5 directories, 9 files
```

### 2.1 å¦‚ä½•å¼•ç”¨å·²å‘å¸ƒçš„åŒ…ï¼Ÿ

#### 2.1.1 æ–¹æ¡ˆä¸€ï¼šå®‰è£…å·²å‘å¸ƒçš„åŒ…

```bash
$ mkdir flyin-awesome-package-test && cd flyin-awesome-package-test
$ npm i flyin-awesome-package
```

#### 2.1.2 æ–¹æ¡ˆäºŒï¼šæ— éœ€å‘å¸ƒï¼Œç›´æ¥linkå¼•ç”¨

- æ–¹å¼ä¸€

  - ç¬¬ä¸€æ­¥ï¼šè¿›å…¥è¢«<span style="color:#9400D3;font-weight:bold;">å¼•ç”¨çš„åŒ…</span>æ‰€åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œåˆ›å»ºå…¨å±€é“¾æ¥

    ```bash
    $ cd flyin-awesome-package
    # ä¼šåœ¨å…¨å±€åˆ›å»ºé“¾æ¥
    $ npm link
    # æŸ¥çœ‹é“¾æ¥
    $ npm list -g --depth=0
    ```

    ```BASH
    /Users/wenqiu/.nvm/versions/node/v20.19.4/lib
    â”œâ”€â”€ corepack@0.32.0
    â”œâ”€â”€ flyin-awesome-package@1.0.2 -> ./../../../../../WebstormProjects/frontend-node-learning/flyin-awesome-package
    ```

  - ç¬¬äºŒæ­¥ï¼šè¿›å…¥è¦ä½¿ç”¨é“¾æ¥çš„é¡¹ç›®

    ```bash
    $ cd flyin-awesome-package-test
    # ä½¿ç”¨é“¾æ¥ï¼Œè¿™é‡ŒæŒ‡å®šçš„æ˜¯åŒ…åï¼ˆæ³¨æ„ï¼šä¸ä¼šåœ¨package.jsonæ·»åŠ ä¾èµ–ï¼Œä½†ä¼šåœ¨node_modulesç›®å½•ä¸‹æŒ‚è½½ï¼‰
    $ npm link flyin-awesome-package
    ```

    ![image-20250918094236673](images/image-20250918094236673.png)

  - ç¬¬ä¸‰æ­¥ï¼šæ¸…ç†ï¼ˆéå¿…é¡»ï¼Œè§†éœ€è¦è€Œå®šï¼‰

    ```bash
    # ç”¨åå¯ä»¥è§£é™¤å¯¹é“¾æ¥çš„ä½¿ç”¨
    $ cd flyin-awesome-package-test
    $ npm unlink flyin-awesome-package
    # åˆ é™¤åˆ›å»ºçš„å¼•ç”¨åŒ…çš„å…¨å±€é“¾æ¥
    $ npm rm -g flyin-awesome-package
    ```

    

- æ–¹å¼äºŒ

è¯¥æ–¹å¼æ˜¯ä¸Šé¢çš„æ­¥éª¤åˆäºŒä¸ºä¸€ï¼Œæ•ˆæœä¸€æ ·ï¼Œä½†è¿™é‡Œçš„linkåé¢ï¼ŒæŒ‡å®šçš„æ˜¯è¢«å¼•ç”¨åŒ…çš„ç›®å½•ã€‚

```bash
$ cd flyin-awesome-package-test
$ npm link ../flyin-awesome-package
```

### 2.2 ä½¿ç”¨

1. åœ¨æµ‹è¯•ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª `test.js` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶éœ€è¦ä½ çš„æ¨¡å—ï¼Œå¹¶å°†ä½ çš„æ¨¡å—ä½œä¸ºæ–¹æ³•è°ƒç”¨ã€‚

```js
// src/test.js
const {helloWorld, welcome} = require('flyin-awesome-package');
console.log(helloWorld())
welcome();
```

2. åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ `node test.js` ã€‚åº”è¯¥ä¼šçœ‹åˆ°å‘é€åˆ° console.log çš„æ¶ˆæ¯ã€‚

```bash
$ node src/test.js 
```

```bash
Hello, World!
æ¬¢è¿ä½¿ç”¨æˆ‘çš„Node.jsæ¨¡å—
```

## 3 ä½œç”¨åŸŸ

### 3.1 å…³äºä½œç”¨åŸŸ

å½“æ‚¨æ³¨å†Œ npm ç”¨æˆ·è´¦æˆ·æˆ–åˆ›å»ºä¸€ä¸ªç»„ç»‡æ—¶ï¼Œæ‚¨å°†è·å¾—ä¸€ä¸ªä¸æ‚¨çš„ç”¨æˆ·æˆ–ç»„ç»‡åç§°åŒ¹é…çš„ä½œç”¨åŸŸã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªä½œç”¨åŸŸä½œä¸ºç›¸å…³åŒ…çš„å‘½åç©ºé—´ã€‚

ä½œç”¨åŸŸå…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªä¸å¦ä¸€ä¸ªç”¨æˆ·æˆ–ç»„ç»‡åˆ›å»ºçš„å…·æœ‰ç›¸åŒåç§°çš„åŒ…ï¼Œè€Œä¸ä¼šäº§ç”Ÿå†²çªã€‚

å½“åœ¨ `package.json` æ–‡ä»¶ä¸­åˆ—ä¸ºä¸»è¦ä¾èµ–æ—¶ï¼Œä½œç”¨åŸŸåŒ…ä¼šä»¥å®ƒä»¬çš„ä½œç”¨åŸŸåç§°å¼€å¤´ã€‚ä½œç”¨åŸŸåç§°æ˜¯ `@` å’Œæ–œæ ä¹‹é—´çš„æ‰€æœ‰å†…å®¹ï¼š

### 3.2 ä½œç”¨åŸŸå’ŒåŒ…çš„å¯è§æ€§

- æ— ä½œç”¨åŸŸçš„åŒ…æ€»æ˜¯å…¬å¼€çš„ã€‚
- ç§æœ‰åŒ…æ€»æ˜¯æœ‰ä½œç”¨åŸŸçš„ã€‚
- ä½œç”¨åŸŸåŒ…é»˜è®¤æ˜¯ç§æœ‰çš„ï¼›å½“ä½ å‘å¸ƒæ—¶ï¼Œå¿…é¡»ä¼ é€’ä¸€ä¸ªå‘½ä»¤è¡Œæ ‡å¿—æ‰èƒ½ä½¿å…¶å…¬å¼€ã€‚

### 3.3 å…³äºå…¬å…±åŒ…

- æ— ä½œç”¨åŸŸçš„å…¬å…±åŒ…å­˜åœ¨äºå…¨å±€å…¬å…±æ³¨å†Œè¡¨å‘½åç©ºé—´ä¸­ï¼Œå¯ä»¥åœ¨ `package.json` æ–‡ä»¶ä¸­ä»…ä½¿ç”¨åŒ…åå¼•ç”¨ï¼š `package-name` ã€‚
- æœ‰ä½œç”¨åŸŸçš„å…¬å…±åŒ…å±äºç”¨æˆ·æˆ–ç»„ç»‡ï¼Œåœ¨ `package.json` æ–‡ä»¶ä¸­ä½œä¸ºä¾èµ–é¡¹å¼•ç”¨æ—¶ï¼Œå¿…é¡»ä»¥ç”¨æˆ·æˆ–ç»„ç»‡çš„åç§°å¼€å¤´ï¼š
    - `@username/package-name`
    - `@org-name/package-name`

### 3.4 å…³äºç§æœ‰åŒ…

è¦ä½¿ç”¨ç§æœ‰åŒ…ï¼Œä½ å¿…é¡»

- ä½¿ç”¨ npm ç‰ˆæœ¬ 2.7.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚è¦å‡çº§ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ `npm install npm@latest -g`
- æ‹¥æœ‰ä»˜è´¹ç”¨æˆ·æˆ–ç»„ç»‡è´¦æˆ·

ä½¿ç”¨ npm ç§æœ‰åŒ…ï¼Œä½ å¯ä»¥ä½¿ç”¨ npm æ³¨å†Œè¡¨æ¥æ‰˜ç®¡åªæœ‰ä½ å’Œé€‰å®šçš„åä½œè€…å¯è§çš„ä»£ç ï¼Œè®©ä½ èƒ½å¤Ÿåœ¨é¡¹ç›®ä¸­ä¸å…¬å…±ä»£ç ä¸€èµ·ç®¡ç†å’Œä½¿ç”¨ç§æœ‰ä»£ç ã€‚

ç§æœ‰åŒ…æ€»æ˜¯æœ‰ä¸€ä¸ªä½œç”¨åŸŸï¼Œè€Œä½œç”¨åŸŸåŒ…é»˜è®¤æ˜¯ç§æœ‰çš„ã€‚

- ç”¨æˆ·ä½œç”¨åŸŸçš„ç§æœ‰åŒ…åªèƒ½è¢«ä½ å’Œè¢«ä½ æˆäºˆè¯»å–æˆ–è¯»å†™æƒé™çš„åä½œè€…è®¿é—®ã€‚
- ç»„ç»‡ä½œç”¨åŸŸçš„ç§æœ‰åŒ…åªèƒ½è¢«è¢«æˆäºˆè¯»å–æˆ–è¯»å†™æƒé™çš„å›¢é˜Ÿè®¿é—®ã€‚

### 3.5 npmåŒ…è®¿é—®çŸ©é˜µ

| ä½œç”¨åŸŸ            | è®¿é—®çº§åˆ«     | å¯ä»¥æŸ¥çœ‹å’Œä¸‹è½½                       | å¯ä»¥å†™å…¥ï¼ˆå‘å¸ƒï¼‰                     |
| ----------------- | ------------ | ------------------------------------ | ------------------------------------ |
| Org ç»„ç»‡          | Private ç§æœ‰ | ç»„ç»‡å›¢é˜Ÿä¸­å…·æœ‰è¯»å–åŒ…æƒé™çš„æˆå‘˜       | ç»„ç»‡å›¢é˜Ÿä¸­å…·æœ‰è¯»å–å’Œå†™å…¥åŒ…æƒé™çš„æˆå‘˜ |
| Org ç»„ç»‡          | Public å…¬å…±  | æ‰€æœ‰äºº                               | ç»„ç»‡å›¢é˜Ÿä¸­å…·æœ‰è¯»å–å’Œå†™å…¥åŒ…æƒé™çš„æˆå‘˜ |
| User ç”¨æˆ·         | Private ç§æœ‰ | æ‹¥æœ‰åŒ…çš„ç”¨æˆ·å’Œè¢«æˆäºˆåŒ…è¯»å–æƒé™çš„ç”¨æˆ· | åŒ…çš„æ‰€æœ‰è€…å’Œè¢«æˆäºˆåŒ…è¯»å†™æƒé™çš„ç”¨æˆ·   |
| User ç”¨æˆ·         | Public å…¬å…±  | æ‰€æœ‰äºº                               | åŒ…çš„æ‰€æœ‰è€…å’Œè¢«æˆäºˆåŒ…è¯»å†™æƒé™çš„ç”¨æˆ·   |
| Unscoped æ— ä½œç”¨åŸŸ | Public å…¬å…±  | æ‰€æœ‰äºº                               | åŒ…çš„æ‰€æœ‰è€…å’Œè¢«æˆäºˆåŒ…è¯»å†™æƒé™çš„ç”¨æˆ·   |

## 4 å…³äºè¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶

ä¸ºäº†ä¿æŒ JavaScript ç”Ÿæ€ç³»ç»Ÿçš„å¥åº·ã€å¯é å’Œå®‰å…¨æ€§ï¼Œæ¯æ¬¡ä½ å¯¹æ‰€æ‹¥æœ‰çš„ npm åŒ…è¿›è¡Œé‡å¤§æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬å»ºè®®åœ¨éµå¾ªè¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶è§„èŒƒçš„ `package.json` æ–‡ä»¶ä¸­å‘å¸ƒä¸€ä¸ªå¸¦æœ‰æ›´æ–°ç‰ˆæœ¬å·çš„åŒ…æ–°ç‰ˆæœ¬ã€‚éµå¾ªè¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶è§„èŒƒæœ‰åŠ©äºä¾èµ–ä½ çš„ä»£ç çš„å…¶ä»–å¼€å‘è€…ç†è§£ç‰¹å®šç‰ˆæœ¬ä¸­çš„å˜æ›´ç¨‹åº¦ï¼Œå¹¶åœ¨å¿…è¦æ—¶è°ƒæ•´ä»–ä»¬è‡ªå·±çš„ä»£ç ã€‚

### 4.1 å·²å‘å¸ƒåŒ…ä¸­çš„è¯­ä¹‰ç‰ˆæœ¬å¢é‡

ä¸ºäº†å¸®åŠ©ä¾èµ–ä½ ä»£ç çš„å¼€å‘è€…ï¼Œæˆ‘ä»¬å»ºè®®ä½ çš„åŒ…ç‰ˆæœ¬ä» `1.0.0` å¼€å§‹ï¼Œå¹¶æŒ‰ä»¥ä¸‹æ–¹å¼é€’å¢ï¼š

| Code status ä»£ç çŠ¶æ€ | Stage é˜¶æ®µ   | Rule è§„åˆ™                                        | Example version ç¤ºä¾‹ç‰ˆæœ¬ |
| -------------------- | ------------ | ------------------------------------------------ | ------------------------ |
| é¦–æ¬¡å‘å¸ƒ             | æ–°äº§å“       | ä» 1.0.0 å¼€å§‹                                    | 1.0.0                    |
| å‘åå…¼å®¹çš„ bug ä¿®å¤  | è¡¥ä¸ç‰ˆæœ¬å‘å¸ƒ | å¢åŠ ç¬¬ä¸‰ä½æ•°å­—                                   | 1.0.1                    |
| å‘åå…¼å®¹çš„æ–°åŠŸèƒ½     | å°ç‰ˆæœ¬å‘å¸ƒ   | å°†ä¸­é—´æ•°å­—åŠ ä¸€ï¼Œå¹¶å°†æœ€åä¸€ä½æ•°å­—é‡ç½®ä¸ºé›¶         | 1.1.0                    |
| ç ´åå‘åå…¼å®¹æ€§çš„å˜æ›´ | å¤§ç‰ˆæœ¬å‘å¸ƒ   | å°†ç¬¬ä¸€ä¸ªæ•°å­—é€’å¢ï¼Œå¹¶å°†ä¸­é—´å’Œæœ€åä¸€ä¸ªæ•°å­—é‡ç½®ä¸ºé›¶ | 2.0.0                    |

### 4.2 ä½¿ç”¨è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶æ¥æŒ‡å®šæ‚¨çš„åŒ…å¯ä»¥æ¥å—çš„æ›´æ–°ç±»å‹

æ‚¨å¯ä»¥åœ¨åŒ…çš„ `package.json` æ–‡ä»¶ä¸­æŒ‡å®šæ‚¨çš„åŒ…å¯ä»¥æ¥å—çš„æ›´æ–°ç±»å‹ã€‚

ä¾‹å¦‚ï¼Œè¦æŒ‡å®šæœ€é«˜åˆ° 1.0.4 çš„å¯æ¥å—ç‰ˆæœ¬èŒƒå›´ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š

- è¡¥ä¸ç‰ˆæœ¬ï¼š `1.0` æˆ– `1.0.x` æˆ– `~1.0.4`
- æ¬¡ç‰ˆæœ¬ï¼š `1` æˆ– `1.x` æˆ– `^1.0.4`
- ä¸»ç‰ˆæœ¬ï¼š `*` æˆ– `x`

æœ‰å…³è¯­ä¹‰ç‰ˆæœ¬å·è¯­æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… [npm semver è®¡ç®—å™¨](https://semver.npmjs.com/)ã€‚

### 4.3 NPMæ¨¡å—çš„ç‰ˆæœ¬å·

æ¯ä¸€ä¸ªæ¨¡å—åé¢å¯¹åº”çš„å°±æ˜¯ä»–çš„ç‰ˆæœ¬å·ï¼Œå¦‚"^4.10.1"ã€‚ä¸‹é¢æ˜¯å‡ ä¸ªç‰ˆæœ¬çš„è¡¨è¾¾å¼ï¼š

| è¡¨è¾¾å¼                     | ç‰ˆæœ¬èŒƒå›´              |
| :------------------------- | :-------------------- |
| >=1.2.7                    | å¤§äºç­‰äº1.2.7         |
| >=1.2.7<1.3.0              | 1.2.7,1.2.8,1.2.9     |
| 1.2.3-2.3.4                | >=1.2.3<=2.3.4        |
| 1.2-2.3.4                  | >=1.2.0<=2.3.4        |
| 1.2.3-2.3                  | >=1.2.3<2.4.0         |
| 1.2.3-2                    | >=1.2.3<3.0.0         |
| *                          | >=0.0.0               |
| 1.x(ç­‰ä»·äº1.X)             | >=1.0.0<2.0.0         |
| 1(ç­‰ä»·äº1.x.x)             | >=1.0.0 <2.0.0        |
| 1.2(ç­‰ä»·äº1.2.x)           | >=1.2.0 <1.3.0        |
| ~1.2.3(>=1.2.3 <1.(2+1).0) | >=1.2.3 <1.3.0        |
| ~1.2(>=1.2.0 <1.(2+1).0)   | >=1.2.0 <1.3.0        |
| ~1(>=1.0.0 <(1+1).0.0)     | >=1.0.0 <2.0.0        |
| ~0.2.3(>=0.2.3 <0.(2+1).0) | >=0.2.3 <0.3.0        |
| ~0.2(>=0.2.0 <0.(2+1).0)   | >=0.2.0 <0.3.0        |
| ~0(>=0.0.0 <(0+1).0.0)     | >=0.0.0 <1.0.0        |
| ~1.2.3-beta.2              | >=1.2.3-beta.2 <1.3.0 |
| ^1.2.3                     | >=1.2.3 <2.0.0        |
| ^0.2.3                     | >=0.2.3 <0.3.0        |
| ^0.0.3                     | >=0.0.3 <0.0.4        |
| ^1.2.3-beta.2              | >=1.2.3-beta.2 <2.0.0 |
| ^0.0.3-beta                | >=0.0.3-beta <0.0.4   |
| ^1.2.x                     | >=1.2.0 <2.0.0        |
| ^0.0.x                     | >=0.0.0 <0.1.0        |
| ^0.0                       | >=0.0.0 <0.1.0        |
| ^1.x                       | >=1.0.0 <2.0.0        |
| ^0.x                       | >=0.0.0 <1.0.0        |

npmåŒ…çš„ç‰ˆæœ¬å·æ ¼å¼X.Y.Zï¼Œç‰ˆæœ¬å·çš„æ ¼å¼éµå¾ªsemver 2.0è§„èŒƒï¼Œå…¶ä¸­Xä¸ºä¸»ç‰ˆæœ¬å·ï¼Œåªæœ‰æ›´æ–°äº†ä¸å‘ä¸‹å…¼å®¹çš„APIæ—¶ä¿®æ”¹ä¸»ç‰ˆæœ¬å·ï¼›Yä¸ºæ¬¡ç‰ˆæœ¬å·ï¼Œå½“æ¨¡å—å¢åŠ äº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ—¶è¿›è¡Œä¿®æ”¹ï¼›Zä¸ºä¿®è®¢ç‰ˆæœ¬å·ï¼Œå½“æ¨¡å—è¿›è¡Œäº†å‘ä¸‹å…¼å®¹çš„bugä¿®æ”¹åè¿›è¡Œä¿®æ”¹ï¼Œè¿™å°±æ˜¯**è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶**ã€‚

#### 4.3.1 è„±å­—ç¬¦`^`

é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç”¨--saveæˆ–è€…--save-devå®‰è£…æ¨¡å—æ—¶ï¼Œnpmé€šè¿‡è„±å­—ç¬¦ï¼ˆ^ï¼‰æ¥<span style="color:red;font-weight:bold;">é™å®šæ‰€å®‰è£…æ¨¡å—çš„`æœ€æ–°çš„`ä¸»ç‰ˆæœ¬å·</span>ï¼Œè€Œè¯¥è„±å­—ç¬¦å¯¹ä¸åŒçš„ç‰ˆæœ¬å·æœ‰ä¸åŒçš„æ›´æ–°æœºåˆ¶ã€‚

- `^1.2.1` ä»£è¡¨çš„æ›´æ–°ç‰ˆæœ¬èŒƒå›´ä¸º>=1.2.1&&<2.0.0
- `^0.2.1` ä»£è¡¨çš„æ›´æ–°ç‰ˆæœ¬èŒƒå›´ä¸º>=0.2.1&&<0.3.0
- `^0.0.2` ä»£è¡¨çš„æ›´æ–°ç‰ˆæœ¬èŒƒå›´ä¸º0.0.2ï¼ˆç›¸å½“äºé”å®šäº†0.0.2ç‰ˆæœ¬ï¼‰

#### 4.3. 2 æ³¢æµªå·`~`

æ³¢æµªå·`~`ä¼š<span style="color:red;font-weight:bold;">åŒ¹é…æœ€è¿‘çš„å°ç‰ˆæœ¬ä¾èµ–åŒ…</span>ã€‚

- `~1.2.3`åŒ¹é… >=1.2.x<1.3.0
- `~1.2`åŒ¹é… >=1.2.0 <1.3.0
- `~1`åŒ¹é… >=1.0.0 <2.0.0

### 4.4 ä¸€ä¸ªç¤ºä¾‹

```bash
"dependencies": {
  "my_dep": "^1.0.0",
  "another_dep": "~2.2.0"
},
```

## 5 ä¸ºåŒ…æ·»åŠ åˆ†å‘æ ‡ç­¾ï¼ˆdist-tagsï¼‰

åˆ†å¸ƒæ ‡ç­¾ï¼ˆdist-tagsï¼‰æ˜¯æ‚¨ç”¨æ¥ç»„ç»‡å’Œæ ‡è®°æ‚¨å‘å¸ƒçš„ä¸åŒç‰ˆæœ¬åŒ…çš„äººæ€§åŒ–æ ‡ç­¾ã€‚dist-tags è¡¥å……è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶ã€‚é™¤äº†æ¯”è¯­ä¹‰ç‰ˆæœ¬ç¼–å·æ›´äººæ€§åŒ–å¤–ï¼Œæ ‡ç­¾è¿˜å…è®¸å‘å¸ƒè€…æ›´æœ‰æ•ˆåœ°åˆ†å‘ä»–ä»¬çš„åŒ…ã€‚

:::warning

æ³¨æ„ï¼šç”±äº dist-tags ä¸è¯­ä¹‰ç‰ˆæœ¬å…±äº«å‘½åç©ºé—´ï¼Œè¯·é¿å…ä¸ç°æœ‰ç‰ˆæœ¬å·å†²çªçš„ dist-tagsã€‚æˆ‘ä»¬å»ºè®®é¿å…ä»¥æ•°å­—æˆ–å­—æ¯â€œvâ€å¼€å¤´çš„ dist-tagsã€‚

:::

### 5.1 ä½¿ç”¨ dist-tag å‘å¸ƒåŒ…

é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿è¡Œ `npm publish` å°†ä¸ºæ‚¨çš„åŒ…æ·»åŠ  `latest` åˆ†å‘æ ‡ç­¾ã€‚è‹¥è¦ä½¿ç”¨å…¶ä»–åˆ†å‘æ ‡ç­¾ï¼Œåœ¨å‘å¸ƒæ—¶ä½¿ç”¨ `--tag` æ ‡å¿—ã€‚

- åœ¨å‘½ä»¤è¡Œä¸­ï¼Œå¯¼èˆªåˆ°æ‚¨çš„åŒ…çš„æ ¹ç›®å½•ã€‚

  `cd /path/to/package`

- è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† `<tag>` æ›¿æ¢ä¸ºæ‚¨è¦ä½¿ç”¨çš„æ ‡ç­¾ï¼š

  `npm publish --tag <tag>`

**ç¤ºä¾‹ï¼š**

è¦åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ "beta" åˆ†å‘æ ‡ç­¾å‘å¸ƒåŒ…ï¼Œè¯·åœ¨æ‚¨çš„åŒ…çš„æ ¹ç›®å½•ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
$ npm publish --tag beta
```

### 5.2 ä¸ºæ‚¨çš„åŒ…çš„ç‰¹å®šç‰ˆæœ¬æ·»åŠ åˆ†å‘æ ‡ç­¾

1. åœ¨å‘½ä»¤è¡Œä¸­ï¼Œå¯¼èˆªåˆ°æ‚¨çš„åŒ…çš„æ ¹ç›®å½•ã€‚

   `cd /path/to/package`

2. è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† `<package_name>` æ›¿æ¢ä¸ºæ‚¨çš„åŒ…åï¼Œ `<version>` æ›¿æ¢ä¸ºæ‚¨çš„åŒ…ç‰ˆæœ¬å·ï¼Œ `<tag>` æ›¿æ¢ä¸ºåˆ†å‘æ ‡ç­¾ï¼š

   `npm dist-tag add <package-name>@<version> [<tag>]`

**ç¤ºä¾‹ï¼š**

è¦å°† "stable" æ ‡ç­¾æ·»åŠ åˆ° "example-package" åŒ…çš„ 1.4.0 ç‰ˆæœ¬ï¼Œæ‚¨å°†è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
$ npm dist-tag add example-package@1.4.0 stable
```

## 6 æ›´æ–°å·²å‘å¸ƒçš„åŒ…ç‰ˆæœ¬å·

å½“ä½ å¯¹å·²å‘å¸ƒçš„åŒ…è¿›è¡Œé‡å¤§ä¿®æ”¹æ—¶ï¼Œæˆ‘ä»¬å»ºè®®æ›´æ–°ç‰ˆæœ¬å·ï¼Œä»¥ä¾¿å‘ä¾èµ–ä½ ä»£ç çš„å…¶ä»–äººä¼ è¾¾ä¿®æ”¹çš„ç¨‹åº¦ã€‚

:::tip

æ³¨æ„ï¼šå¦‚æœä½ å°†ä¸€ä¸ª git ä»“åº“é“¾æ¥åˆ°äº†ä¸€ä¸ªåŒ…ï¼Œæ›´æ–°åŒ…çš„ç‰ˆæœ¬å·ä¹Ÿä¼šå‘é“¾æ¥çš„ git ä»“åº“æ·»åŠ ä¸€ä¸ªå¸¦æœ‰æ›´æ–°å‘å¸ƒå·çš„æ ‡ç­¾ã€‚

:::

è¦åœ¨ `package.json` ä¸­æ›´æ”¹ç‰ˆæœ¬å·ï¼Œåœ¨å‘½ä»¤è¡Œä¸­ï¼Œåœ¨åŒ…çš„æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† `<update_type>` æ›¿æ¢ä¸ºè¯­ä¹‰ç‰ˆæœ¬å‘å¸ƒç±»å‹ä¹‹ä¸€ï¼ˆè¡¥ä¸ã€ä¸»è¦æˆ–æ¬¡è¦ï¼‰ï¼š

1. `npm version <update_type>`

   ```bash
   npm version [<newversion> | major | minor | patch | premajor | preminor | prepatch | prerelease | from-git]
   ```

2. è¿è¡Œ `npm publish`

3. å‰å¾€æ‚¨çš„åŒ…é¡µé¢ ( `https://npmjs.com/package/<package>` ) æ£€æŸ¥åŒ…ç‰ˆæœ¬æ˜¯å¦å·²æ›´æ–°ã€‚

â€‹	æ¯”å¦‚ï¼šhttps://www.npmjs.com/package/flyin-awesome-package



## 7 å¼ƒç”¨å’Œæ¢å¤åŒ…æˆ–åŒ…ç‰ˆæœ¬

### 7.1 å¯ç”¨åŒ…æˆ–ç‰ˆæœ¬

#### 7.1.1 å¼ƒç”¨æ•´ä¸ªåŒ…

è¦å¼ƒç”¨æ•´ä¸ªåŒ…ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† `<package-name>` æ›¿æ¢ä¸ºæ‚¨çš„åŒ…åï¼Œå°† `"<message>"` æ›¿æ¢ä¸ºæ‚¨çš„å¼ƒç”¨æ¶ˆæ¯ï¼š

`npm deprecate <package-name> "<message>"`

å¦‚æœæ‚¨å·²å¯ç”¨åŒå› ç´ è®¤è¯ï¼Œè¯·åœ¨å‘½ä»¤ä¸­æ·»åŠ ä¸€æ¬¡æ€§å¯†ç ï¼Œ `--otp=123456` ï¼ˆå…¶ä¸­ 123456 æ˜¯æ‚¨è®¤è¯å™¨åº”ç”¨ä¸­çš„ä»£ç ï¼‰ã€‚

#### 7.1.2 å¼ƒç”¨åŒ…çš„å•ä¸€ç‰ˆæœ¬

å½“æ‚¨å¼ƒç”¨åŒ…çš„æŸä¸ªç‰ˆæœ¬æ—¶ï¼Œè¯¥ç‰ˆæœ¬çš„åŒ…é¡µé¢ä¸Šå°†æ˜¾ç¤ºä¸€æ¡çº¢è‰²æ¶ˆæ¯ï¼Œç±»ä¼¼äºå¼ƒç”¨æ•´ä¸ªåŒ…ã€‚

![Screenshot of package deprecation for a particular version](images/deprecate-version.png)

è¦å¼ƒç”¨æŸä¸ªåŒ…çš„ç‰ˆæœ¬ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† `<package-name>` æ›¿æ¢ä¸ºæ‚¨çš„åŒ…åï¼Œ `<version>` æ›¿æ¢ä¸ºæ‚¨çš„ç‰ˆæœ¬å·ï¼Œ `"<message>"` æ›¿æ¢ä¸ºæ‚¨çš„å¼ƒç”¨ä¿¡æ¯ï¼š

`npm deprecate <package-name>@<version> "<message>"`

å‘½ä»¤è¡Œæ¨¡å¼ä¸‹è¿˜æ¥å— `<version>` çš„ç‰ˆæœ¬èŒƒå›´ã€‚

å¦‚æœä½ æœ‰åŒå› ç´ è®¤è¯ï¼Œåœ¨å‘½ä»¤ä¸­æ·»åŠ ä¸€æ¬¡æ€§å¯†ç ï¼Œ `--otp=123456` ï¼ˆå…¶ä¸­ 123456 æ˜¯ä½ è®¤è¯å™¨ä¸­çš„ä»£ç ï¼‰ã€‚

### 7.2 é‡æ–°å¯ç”¨åŒ…æˆ–ç‰ˆæœ¬

è¦å–æ¶ˆå¼ƒç”¨æŸä¸ªåŒ…ï¼Œå°†ä¸Šè¿°å‘½ä»¤ä¸­çš„ä¸€ä¸ª `"<message>"` æ›¿æ¢ä¸º `""` ï¼ˆä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼‰ã€‚

ä¾‹å¦‚ï¼Œè¦å–æ¶ˆå¼ƒç”¨æ•´ä¸ªåŒ…ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† `<package-name>` æ›¿æ¢ä¸ºä½ çš„åŒ…åï¼Œå°† `<version>` æ›¿æ¢ä¸ºä½ çš„ç‰ˆæœ¬å·ï¼š

`npm deprecate <package-name> ""`

æˆ–è€…ï¼Œè¦ä»…å–æ¶ˆå¼ƒç”¨ä¸€ä¸ªå•ä¸ªåŒ…ç‰ˆæœ¬ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† `<package-name>` æ›¿æ¢ä¸ºä½ çš„åŒ…åï¼Œå°† `<version>` æ›¿æ¢ä¸ºä½ çš„ç‰ˆæœ¬å·ï¼š

`pm deprecate <package-name>@<version> ""`

å¦‚æœä½ æœ‰åŒå› ç´ è®¤è¯ï¼Œåœ¨å‘½ä»¤ä¸­æ·»åŠ ä¸€æ¬¡æ€§å¯†ç ï¼Œ `--otp=123456` ï¼ˆå…¶ä¸­ 123456 æ˜¯ä½ è®¤è¯å™¨ä¸­çš„ä»£ç ï¼‰ã€‚

## 8 å–æ¶ˆå‘å¸ƒåŒ…æˆ–åŒ…ç‰ˆæœ¬ï¼ˆä¸‹æ¶ï¼‰

### 8.1 å–æ¶ˆå‘å¸ƒç­–ç•¥

ä½œä¸ºåŒ…çš„æ‰€æœ‰è€…æˆ–åä½œè€…ï¼Œå¦‚æœä½ çš„åŒ…æ²¡æœ‰ä¾èµ–é¡¹ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨å‘½ä»¤è¡Œç•Œé¢å°†å…¶æ°¸ä¹…ä» npm æ³¨å†Œè¡¨ä¸­åˆ é™¤ã€‚ä½ å¯ä»¥åœ¨é¦–æ¬¡å‘å¸ƒåçš„ 72 å°æ—¶å†…å–æ¶ˆå‘å¸ƒï¼›è¶…è¿‡ 72 å°æ—¶åï¼Œå¦‚æœä½ çš„[åŒ…ç¬¦åˆæŸäº›æ¡ä»¶](https://docs.npmjs.com/policies/unpublish)ï¼Œä½ ä»ç„¶å¯ä»¥å–æ¶ˆå‘å¸ƒã€‚

è§£é™¤å‘å¸ƒç­–ç•¥ï¼š

- å¯¹äºæ–°åˆ›å»ºçš„åŒ…ï¼Œåªè¦ npm å…¬å…±æ³¨å†Œè¡¨ä¸­æ²¡æœ‰å…¶ä»–åŒ…ä¾èµ–äºä½ çš„åŒ…ï¼Œä½ å¯ä»¥åœ¨å‘å¸ƒåçš„å‰ 72 å°æ—¶å†…éšæ—¶ä¸‹æ¶ã€‚
- å¯¹äºè¶…è¿‡72å°æ—¶çš„åŒ…
  - æ²¡æœ‰å…¶ä»– npm å…¬å…±æ³¨å†Œè¡¨ä¸­çš„åŒ…ä¾èµ–äºå®ƒ
  - è¿‡å»ä¸€å‘¨çš„ä¸‹è½½é‡å°‘äº 300 æ¬¡
  - å®ƒåªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…/ç»´æŠ¤è€…

è¿™äº›æ¡ä»¶æ˜¯ä¸ºäº†é¿å…æŸå®³ JavaScript åŒ…ç”Ÿæ€ç³»ç»Ÿã€‚å¦‚æœä½ æ— æ³•å–æ¶ˆå‘å¸ƒä½ çš„åŒ…ï¼Œä½ å¯ä»¥é€‰æ‹©å°†å…¶å¼ƒç”¨ã€‚

:::tip

æ³¨æ„ï¼šä»åŒ…ä¸­åˆ é™¤æ‰€æœ‰åä½œè€…æˆ–å›¢é˜Ÿä¸ä¼šå°†å…¶å–æ¶ˆå‘å¸ƒã€‚

:::

### 8.2 å¦‚ä½•å–æ¶ˆå‘å¸ƒ

è¦å–æ¶ˆå‘å¸ƒå•ä¸ªåŒ…ç‰ˆæœ¬ï¼Œè¿è¡Œ `npm unpublish <package_name>@<version>` ã€‚

å¦‚æœåŒ…çš„æ‰€æœ‰ç‰ˆæœ¬éƒ½å¯ä»¥å–æ¶ˆå‘å¸ƒï¼Œä½ å¯ä»¥é€šè¿‡è¿è¡Œ `npm unpublish <package_name> --force` ä¸€æ¬¡æ€§å–æ¶ˆå‘å¸ƒæ‰€æœ‰ç‰ˆæœ¬ã€‚

### 8.3 æ³¨æ„äº‹é¡¹

- ä¸€æ—¦ä½¿ç”¨è¿‡ `package@version` ï¼Œä½ å°±å†ä¹Ÿæ— æ³•ä½¿ç”¨å®ƒäº†ã€‚<span style="color:red;font-weight:bold;">å³ä½¿ä½ å·²å–æ¶ˆå‘å¸ƒæ—§ç‰ˆæœ¬ï¼Œä¹Ÿå¿…é¡»å‘å¸ƒæ–°ç‰ˆæœ¬</span>ã€‚
- <span style="color:red;font-weight:bold;">ä¸€æ—¦ä½ å–æ¶ˆå‘å¸ƒä¸€ä¸ªåŒ…ï¼Œä½ å°†æ— æ³•æ’¤é”€å–æ¶ˆå‘å¸ƒæ“ä½œã€‚</span>

- <span style="color:red;font-weight:bold;">å¦‚æœä½ å®Œå…¨å–æ¶ˆå‘å¸ƒä¸€ä¸ªåŒ…çš„æ‰€æœ‰ç‰ˆæœ¬ï¼Œåœ¨ 24 å°æ—¶ä¹‹å†…ä½ å¯èƒ½æ— æ³•å†å‘å¸ƒè¯¥åŒ…çš„ä»»ä½•æ–°ç‰ˆæœ¬ã€‚</span>

:::details ä¸‹æ¶åå†ä¸Šæ¶é”™è¯¯æç¤º

```bash
$ npm unpublish flyin-awesome-package --force
```

---



```bash
npm warn using --force Recommended protections disabled.
- flyin-awesome-package
```

---



```bash
$ npm publish
```

---



```bash
npm notice
npm notice ğŸ“¦  flyin-awesome-package@1.0.2
npm notice Tarball Contents
npm notice 120B README.md
npm notice 570B package.json
npm notice 262B src/helloWorld.js
npm notice 151B src/index.js
npm notice 86B src/test.js
npm notice 318B src/welcome.js
npm notice Tarball Details
npm notice name: flyin-awesome-package
npm notice version: 1.0.2
npm notice filename: flyin-awesome-package-1.0.2.tgz
npm notice package size: 1.1 kB
npm notice unpacked size: 1.5 kB
npm notice shasum: e005b06112bfb3b4df6d56b529b7901ccf33257d
npm notice integrity: sha512-tHanAdBJodW/9[...]AqHhFUNWHfNkQ==
npm notice total files: 6
npm notice
npm notice Publishing to https://registry.npmjs.org/ with tag latest and default access
npm error code E403
npm error 403 403 Forbidden - PUT https://registry.npmjs.org/flyin-awesome-package - flyin-awesome-package cannot be republished until 24 hours have passed.
npm error 403 In most cases, you or one of your dependencies are requesting
npm error 403 a package version that is forbidden by your security policy, or
npm error 403 on a server you do not have access to.
npm error A complete log of this run can be found in: /Users/wenqiu/.npm/_logs/2025-09-16T06_55_47_191Z-debug-0.log
```

:::

