[React学习视频](https://www.bilibili.com/video/BV1wy4y1D7JT/?spm_id_from=333.337.search-card.all.click&vd_source=b850b3a29a70c8eb888ce7dff776a5d1)

[React学习视频补充](https://www.bilibili.com/video/BV1dP4y1c7qd?spm_id_from=333.788.videopod.episodes&vd_source=b850b3a29a70c8eb888ce7dff776a5d1&p=67)

[React GitHub](https://github.com/facebook/react)

[React英文官网](https://react.dev/)【推荐】

[React中文官网](https://zh-hans.react.dev/)

[React-Router](https://reactrouter.com/)

[印记中国之React文档](https://react.docschina.org/)

[印记中国之React-Router](https://react-router.docschina.org/)

------

# 0 前置环境

```bash
$ node -v
v18.20.8
$ pnpm -v
10.8.0
$ npm -v
10.8.2
```

# 1 创建脚手架项目(create-react-app)

## 1.1 创建项目

- create-react-app【20250809】

[（中文）为什么弃用create-react-app](https://react.docschina.org/blog/2025/02/14/sunsetting-create-react-app#deprecating-create-react-app)

[（英文）为什么弃用create-react-app](https://react.dev/blog/2025/02/14/sunsetting-create-react-app#deprecating-create-react-app)

```bash
$ npm i -g create-react-app
$ create-react-app react-02-staging
```

```bash

Creating a new React app in /Users/wenqiu/WebstormProjects/frontend-react-learning/react-02-staging.

Installing packages. This might take a couple of minutes.
Installing react, react-dom, and react-scripts with cra-template...


added 1323 packages in 1h

269 packages are looking for funding
  run `npm fund` for details

Installing template dependencies using npm...

added 18 packages, and changed 1 package in 10s

269 packages are looking for funding
  run `npm fund` for details
Removing template package using npm...


removed 1 package, and audited 1341 packages in 4s

269 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (3 moderate, 6 high)

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

Success! Created react-02-staging at /Users/wenqiu/WebstormProjects/frontend-react-learning/react-02-staging
Inside that directory, you can run several commands:

  npm start
    Starts the development server.

  npm run build
    Bundles the app into static files for production.

  npm test
    Starts the test runner.

  npm run eject
    Removes this tool and copies build dependencies, configuration files
    and scripts into the app directory. If you do this, you can’t go back!

We suggest that you begin by typing:

  cd react-02-staging
  npm start

Happy hacking! 
```

## 1.2 测试代理服务器

目前，Vite和Next.js都已经使用了更好的代理配置，但CRA（create-react-app）还需要如下配置

- 启动服务

```bash
$ pnpm i
$ node server1.js
$ node server2.js
```

### 1.2.1使用 `http-proxy-middleware` (推荐)

这是 CRA 官方推荐的代理配置方式，适用于 React 16.3+ 版本。

- React项目安装http-proxy-middleware

```bash
$ pnpm view http-proxy-middleware versions
$ pnpm add -D http-proxy-middleware@2.0.9
```

- 方式1：创建`src/setupProxy.js`（**注意：文件名必须严格一致**）：

```js
const {createProxyMiddleware: proxy} = require('http-proxy-middleware');

module.exports = function (app) {
    app.use(
        proxy('/api1', { // 映射key，请求/api1的映射到此配置
            target: 'http://localhost:5000', // 请求转发的目标地址
            changeOrigin: true, // 默认不修改请求头的Host，保持源Host(这里是 localhost:3000)；若为true，则修改为 localhost:5000
            pathRewrite: {'^/api1': ''} // 重写请求路径（如移除前缀 /api1）
        }),
        proxy('/api2', {
            target: 'http://localhost:5001',
            changeOrigin: true,
            pathRewrite: {'^/api2': ''}
        })
    )
};
```

- 方式2：修改 `package.json` （简单场景）

```json
{
  "proxy": {
    "/api": {
      "target": "http://localhost:5000",
      "changeOrigin": true
    }
  }
}
```

# 2 流行的开源React UI组件库

## 2.1 国外的 material-ui

官网：https://mui.com/material-ui/

## 2.2 ant-design（国内蚂蚁金服）

官网：https://ant.design/index-cn

# 3 react-router-dom

官网：https://reactrouter.com/

# 4 redux理解

## 4.1 学习文档

英文文档： https://redux.js.org/

中文文档： http://www.redux.org.cn/

## 4.2 redux是什么

1. redux是一个专门用于做<span style="color:red;font-weight:bold;">状态管理</span>的JS库（不是react插件库）
2. 它可以用在react、angular、vue等项目中，但基本与react配合使用
3. 作用：集中式管理react应用中多个组件<span style="color:red;font-weight:bold;">共享</span>的状态。

## 4.3 什么情况下需要使用redux

1. 某个组件的状态，需要让其他组件可以随时拿到（共享）。
2. 一个组件需要改变另一个组件的状态（通信）。
3. 总体原则：能不用就不用，如果不用比较吃力才考虑实用。

## 4.4 redux的三个核心概念

### 4.4.1 action

1. 动作的对象
2. 包含2个属性
   1. type：标识属性，值为字符串，唯一，必要属性
   2. data：数据属性，值类型任意，可选属性
3. 例子：

```json
{type: 'ADD_STUDENT', data: {name: 'tom', age: 18}}
```

### 4.4.2 reducer

1. 用于初始化状态、加工状态。
2. 加工时，根据旧的state和action，产生新的state的<span style="color:red;font-weight:bold;">纯函数</span>

### 4.4.3 store

1. 将state、action、reducer联系在一起的对象
2. 如何得到此对象？
   1. `import {createStore} from ‘redux’`
   2. `import reducer from ‘./reducers’`
   3. `const store = createStore(reducer)`
3. 此对象的功能
   1. getState()：得到state
   2. dispatch(action)：分发action，触发reducer调用，产生新的state
   3. subscribe(listener)：注册监听，当产生了新的state时，自动调用

# 5 打包部署

```bash
$ npm run build
$ npm i -g serve
$ serve build
```



# 6 WebStorm下React Live Templates

### **React 组件模板**

| 缩写    | 说明（英文）                                        | 中文解释                                   |
| :------ | :-------------------------------------------------- | :----------------------------------------- |
| `con`   | Constructor with props argument                     | 带 props 参数的类组件构造函数              |
| `fsc`   | React Flow arrow function component                 | React Flow 箭头函数组件                    |
| `fsf`   | React Flow function component                       | React Flow 普通函数组件                    |
| `props` | this.props.                                         | 快速生成 `this.props.` 属性引用            |
| `rcc`   | React class component                               | 基础 React 类组件                          |
| `rccp`  | React class component with PropTypes                | 带 PropTypes 类型检查的类组件              |
| `rcfc`  | React class component with PropTypes and lifecycle  | 带 PropTypes 和生命周期方法的类组件        |
| `rsc`   | React arrow function component                      | React 箭头函数组件（无 PropTypes）         |
| `rscp`  | React arrow function component with propTypes       | 带 PropTypes 的箭头函数组件                |
| `rsf`   | React function component                            | React 普通函数组件（无 PropTypes）         |
| `rsfp`  | React function component with propTypes             | 带 PropTypes 的普通函数组件                |
| `rsi`   | React arrow function component with implicit return | 隐式返回的箭头函数组件（无 return 关键字） |
| `state` | this.state.                                         | 快速生成 `this.state.` 状态引用            |

### **React Hooks 模板**

| 缩写              | 说明（英文）                                           | 中文解释                              |
| :---------------- | :----------------------------------------------------- | :------------------------------------ |
| `lazyImport`      | `const Component = lazy(() => import('path'))`         | 动态导入组件的 React.lazy 语法        |
| `useCallback`     | `const name = useCallback(() => {}, [])`               | 生成 useCallback 记忆函数             |
| `useContext`      | `const value = useContext(context)`                    | 生成 useContext 上下文引用            |
| `useEffect`       | `useEffect(() => {}, [])`                              | 生成基础 useEffect 副作用钩子         |
| `useLayoutEffect` | `useLayoutEffect(() => {}, [])`                        | 生成 useLayoutEffect DOM 更新同步钩子 |
| `useMemo`         | `const cachedValue = useMemo(() => {}, [])`            | 生成 useMemo 记忆值计算               |
| `useReducer`      | `const [state, dispatch] = useReducer(params)`         | 生成 useReducer 状态管理钩子          |
| `useRef`          | `const ref = useRef(initialValue)`                     | 生成 useRef 引用对象                  |
| `useState`        | `const [state, setState] = useState()`                 | 生成基础 useState 状态钩子            |
| `useTransition`   | `const [isPending, startTransition] = useTransition()` | 生成 useTransition 过渡状态钩子       |

